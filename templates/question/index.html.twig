{% extends "global/layout.html.twig" %}

{% set actived = 'index' %}

{% block content %}
    <div class="card">
        <div class="card-body">
            <ul class="nav nav-tabs">
                <li class="nav-item">
                    <a class="nav-link{% if sort == 'latest' or sort == '' %} active{% endif %}"
                       href="{{ path('question_index') }}">latest</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link{% if sort == 'hottest' %} active{% endif %}"
                       href="{{ path('question_index') }}?sort=hottest">hottest</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link{% if sort == 'unanswered' %} active{% endif %}"
                       href="{{ path('question_index') }}?sort=unanswered">unanswered</a>
                </li>
            </ul>
            {% for question in questions %}
                <section class="container question-summary narrow">
                    <div class="cp">
                        <div class="status vote">
                            <div class="mini-counts">
                                <strong>{{ question.votes }}</strong>
                            </div>
                            {% if question.votes > 1 %}votes{% else %}vote{% endif %}
                        </div>
                        <div class="status{% if question.isSolved %} answered-accepted{% elseif question.isSolved == false and question.getAnswerNums != 0 %} answered{% else %} unanswered{% endif %}">
                            <div class="mini-counts">
                                <strong>{{ question.answers|length }}</strong>
                            </div>
                            {% if question.answers|length > 1 %}answers{% else %}answer{% endif %}
                        </div>
                        <div class="status views">
                            <div class="mini-counts">
                                <strong>{{ question.views }}</strong>
                            </div>
                            {% if question.views > 1 %}views{% else %}view{% endif %}
                        </div>
                    </div>
                    <div class="summary">
                        <h3>
                            <a class="header"
                               href="{{ path('question_show', {id: question.id}) }}">{{ question.subject }}</a>
                        </h3>
                        <div class="tags float-left mr-2">
                            {% for tag in question.tags %}
                                <a class="btn btn-sm btn-light" href="">{{ tag.name }}</a>
                            {% endfor %}
                        </div>
                        <div class="started float-right">
                            <a href="#">{{ question.user.username }}</a>
                            <span class="started-link">asked on
                                <time class="date"
                                      datetime="{{ question.createdAt | date('c') }}">{{ question.createdAt | ago }}</time>
                            </span>
                        </div>
                    </div>
                </section>
            {% endfor %}
        </div>
        {# display navigation #}
        {{ knp_pagination_render(questions) }}

    </div>
{% endblock %}